# PRD: 쿠팡 파트너스 자동 블로그 작성 시스템

## 📋 문서 정보
- **버전**: 1.0
- **최종 수정일**: 2026-01-19
- **작성자**: Product Owner

---

## 📋 프로젝트 개요

### 프로젝트명
**쿠팡 파트너스 자동 블로그 작성 시스템 (Coupang Auto Blog Generator)**

### 목적
키워드 기반으로 쿠팡 파트너스 상품을 자동 수집하고, AI를 활용해 블로그 글을 작성한 후 워드프레스에 자동 업로드하여 **수동 작업 시간을 절감**하고 **효율적인 컨텐츠 생산**을 가능하게 합니다.

### 해결하고자 하는 문제
- 매일 10-30개의 블로그 글을 수동으로 작성하는 데 소요되는 시간
- 쿠팡 상품 검색 및 선별 과정의 번거로움
- 워드프레스 업로드 및 SEO 설정의 반복 작업
- 예약 발행 관리의 복잡성

### 목표 사용자
- **1차 사용자**: 본인 (쿠팡 파트너스 마케터, 블로그 운영자)
- **2차 사용자**: 향후 서비스화 시 다른 파트너스 마케터들

### 핵심 가치 제안
하루 10-30개의 블로그 글을 **완전 자동화**하여 시간을 90% 이상 절감하고, AI 기반 고품질 컨텐츠를 워드프레스에 자동 배포

---

## 🎯 프로젝트 범위

### MVP 기능 (Phase 1)
- [x] 키워드 입력 (단일 키워드 / 키워드 리스트)
- [x] 쿠팡 파트너스 API 연동 및 상품 5개 수집 (평점/리뷰 높은 순)
- [x] Claude 또는 Gemini API를 통한 AI 글 작성
- [x] 워드프레스 REST API 자동 업로드
- [x] Rank Math SEO 설정 (Focus Keyword, Meta Description)
- [x] 발행 예약 (사용자 설정 간격 & 시간대 지정)
- [x] 실시간 진행 상황 표시
- [x] API 키 관리 (로컬 스토리지 저장)

### 향후 확장 가능 기능 (Phase 2)
- [ ] 로그인 시스템 (관리자 / 일반 사용자 구분)
- [ ] 작성 이력 대시보드
- [ ] API 크레딧 추적 및 모니터링
- [ ] 여러 워드프레스 블로그 동시 관리
- [ ] 프롬프트 관리 UI (관리자 전용)
- [ ] 글 작성 템플릿 다양화
- [ ] 이미지 자동 최적화 및 업로드

### 제외 항목
- 썸네일 이미지 자동 생성 (쿠팡 제공 상품 이미지만 사용)
- 사용자별 데이터 영구 저장
- 모바일 앱 버전

---

## 🔧 핵심 기능 명세

### 1. API 키 설정 페이지
**설명**: 사용자가 필요한 모든 API 키를 입력하고 관리하는 설정 페이지

**주요 요소:**
- 쿠팡 파트너스 API 키 입력 필드
- 워드프레스 REST API URL 및 인증 키
- Claude API 키
- Gemini API 키
- 로컬 스토리지 저장 (브라우저에 암호화하여 저장)

**사용자 인터랙션:**
- 설정 페이지에서 API 키 입력 후 "저장" 버튼 클릭
- 다음 방문 시 자동으로 불러오기

**우선순위**: **High**

---

### 2. 키워드 입력 및 실행
**설명**: 단일 키워드 또는 여러 개의 키워드 리스트를 입력하여 자동 글 작성 프로세스를 실행

**주요 요소:**
- 단일 키워드 입력 필드
- 여러 키워드 입력 (텍스트 영역, 줄바꿈으로 구분)
- AI 선택 (Claude / Gemini 라디오 버튼)
- 발행 간격 설정 (분 단위 입력)
- 발행 시간대 설정 (시작 시간 ~ 종료 시간)
- "실행" 버튼

**사용자 인터랙션:**
1. 키워드 입력 (예: "무선 이어폰" 또는 여러 개)
2. AI 모델 선택
3. 발행 간격 입력 (예: 10분)
4. 시간대 지정 (예: 09:00 ~ 18:00)
5. 실행 버튼 클릭

**우선순위**: **High**

---

### 3. 쿠팡 파트너스 상품 수집
**설명**: 입력된 키워드로 쿠팡 API를 호출하여 평점/리뷰가 높은 상위 5개 상품을 자동 수집

**주요 요소:**
- 쿠팡 파트너스 Product Search API 호출
- 정렬 기준: 평점 높은 순, 리뷰 많은 순 (우선순위)
- 상품 정보 추출:
  - 상품명
  - 가격
  - 이미지 URL
  - 상품 링크 (파트너스 링크)
  - 평점
  - 리뷰 수

**예외 처리:**
- 상품이 5개 미만일 경우: 있는 만큼만 사용
- API 호출 실패 시: 전체 프로세스 중단 및 에러 알림

**우선순위**: **High**

---

### 4. AI 글 작성
**설명**: 수집된 쿠팡 상품 정보를 기반으로 Claude 또는 Gemini API를 사용해 블로그 글 자동 작성

**주요 요소:**
- 사용자 선택에 따라 Claude 또는 Gemini API 호출
- 프롬프트: 코드에 고정 (관리자만 수정 가능)
- 입력 데이터:
  - 키워드
  - 상품 5개 정보 (상품명, 가격, 이미지, 링크, 평점, 리뷰)
- 출력:
  - 블로그 글 본문 (HTML 형식)
  - Focus Keyword (SEO용)
  - Meta Description (SEO용)

**프롬프트 구조 예시:**
```
당신은 쿠팡 파트너스 블로그 글 작성 전문가입니다.
키워드: {keyword}
상품 정보: {products}

다음을 작성해주세요:
1. 매력적인 제목
2. 상품 비교 및 추천 본문 (1500-2000자)
3. 각 상품별 특징 및 장단점
4. 구매 가이드
5. Focus Keyword
6. Meta Description (150자 이내)
```

**예외 처리:**
- API 호출 실패 시: 전체 프로세스 중단 및 에러 알림

**우선순위**: **High**

---

### 5. 워드프레스 자동 업로드
**설명**: 작성된 글을 워드프레스 REST API를 통해 자동으로 업로드하고 Rank Math SEO 설정 적용

**주요 요소:**
- 워드프레스 REST API `/wp-json/wp/v2/posts` 엔드포인트 사용
- 글 내용 업로드:
  - 제목
  - 본문 (HTML)
  - 상품 이미지 포함 (쿠팡 제공 이미지 URL 임베드)
- Rank Math SEO 메타데이터 설정:
  - Focus Keyword
  - Meta Description
- 발행 예약:
  - 사용자 지정 간격 (예: 10분)
  - 시간대 제한 (예: 09:00 ~ 18:00)
  - 순차적으로 예약 시간 계산

**워크플로우:**
1. 첫 번째 글: 현재 시간 기준으로 다음 가능한 시간에 예약
2. 두 번째 글: 첫 번째 + 설정 간격
3. 시간대를 벗어나면 다음 날 시작 시간부터 재계산

**예외 처리:**
- API 호출 실패 시: 전체 프로세스 중단 및 에러 알림

**우선순위**: **High**

---

### 6. 실시간 진행 상황 표시
**설명**: 작업 진행 중 각 단계별 상태를 실시간으로 화면에 표시

**주요 요소:**
- 프로그레스 바 또는 스텝 인디케이터
- 현재 작업 상태 텍스트:
  - "쿠팡 상품 수집 중... (1/5)"
  - "AI 글 작성 중..."
  - "워드프레스 업로드 중..."
  - "완료! ✅"
- 에러 발생 시 빨간색 경고 메시지

**우선순위**: **Medium**

---

### 7. 에러 처리 및 알림
**설명**: API 호출 실패 또는 예외 상황 발생 시 사용자에게 명확한 알림 제공

**주요 요소:**
- 에러 발생 시 전체 프로세스 즉시 중단
- 에러 메시지 팝업 또는 알림:
  - "쿠팡 API 호출 실패: [상세 메시지]"
  - "AI API 호출 실패: [상세 메시지]"
  - "워드프레스 업로드 실패: [상세 메시지]"

**우선순위**: **High**

---

## 🛠 기술 스택

### Frontend
- **Framework**: Next.js 14 (App Router)
- **Language**: TypeScript
- **Styling**: Tailwind CSS
- **State Management**: React Hooks (useState, useEffect)
- **HTTP Client**: Axios 또는 Fetch API

### Backend
- **API Routes**: Next.js API Routes (serverless functions)
- **API 연동**:
  - 쿠팡 파트너스 API
  - Claude API (Anthropic)
  - Gemini API (Google)
  - 워드프레스 REST API

### 데이터 저장
- **로컬 스토리지**: API 키 저장 (브라우저)
- **데이터베이스**: 불필요 (Phase 1)

### 인프라 & 배포
- **Hosting**: Vercel (추천) 또는 Railway / Render
- **환경 변수**: API 키 보안 관리

### 외부 서비스
- 쿠팡 파트너스 API
- Claude API (Anthropic)
- Gemini API (Google AI)
- 워드프레스 REST API
- Rank Math SEO Plugin

---

## 🎨 디자인 요구사항

### 디자인 컨셉
- **스타일**: 심플하고 깔끔한 + 대시보드 느낌 믹스
- **무드**: 전문적이고 효율적인 도구
- **참고**: Notion, Linear, Vercel Dashboard

### 색상 팔레트
- **Primary**: 블루 계열 (#3B82F6) - 신뢰감
- **Secondary**: 그레이 (#6B7280) - 중립적
- **Success**: 그린 (#10B981) - 완료 상태
- **Error**: 레드 (#EF4444) - 에러 알림

### 타이포그래피
- **Font**: Inter 또는 Pretendard (한글 지원)
- **크기**: 깔끔하고 가독성 좋은 계층 구조

### 반응형 디자인
- **우선순위**: Desktop-first (작업 도구 성격)
- **모바일**: 기본 대응 (필수는 아님)

---

## 📱 페이지 구조

### URL 구조
```
/ → 메인 페이지 (키워드 입력 & 실행)
/settings → API 키 설정 페이지
```

### 주요 페이지 레이아웃

#### 1. 메인 페이지 (`/`)
```
[Header]
- 로고 / 타이틀: "쿠팡 파트너스 자동 블로그"
- Settings 버튼 (톱니바퀴 아이콘)

[Main Content]
┌─────────────────────────────────────┐
│ 키워드 입력                          │
│ ┌─────────────────────────────────┐ │
│ │ 단일 키워드 또는 여러 개 입력   │ │
│ │ (줄바꿈으로 구분)                │ │
│ └─────────────────────────────────┘ │
│                                     │
│ AI 모델 선택                        │
│ ( ) Claude  ( ) Gemini             │
│                                     │
│ 발행 설정                           │
│ 간격: [10] 분                       │
│ 시간대: [09:00] ~ [18:00]          │
│                                     │
│ [실행하기] 버튼                     │
└─────────────────────────────────────┘

[Progress Section]
- 진행 상황 표시 (실시간)
- 에러 메시지 (발생 시)
```

#### 2. 설정 페이지 (`/settings`)
```
[Header]
- 뒤로 가기 버튼

[Settings Form]
┌─────────────────────────────────────┐
│ API 키 설정                          │
│                                     │
│ 쿠팡 파트너스 API 키                │
│ [__________________________]        │
│                                     │
│ 워드프레스 설정                     │
│ URL: [__________________________]  │
│ API 키: [_______________________]  │
│                                     │
│ Claude API 키                       │
│ [__________________________]        │
│                                     │
│ Gemini API 키                       │
│ [__________________________]        │
│                                     │
│ [저장하기] 버튼                     │
└─────────────────────────────────────┘
```

---

## 📊 데이터 구조

### API 키 저장 구조 (로컬 스토리지)
```typescript
interface ApiKeys {
  coupang: string;
  wordpress: {
    url: string;
    apiKey: string;
  };
  claude: string;
  gemini: string;
}
```

### 쿠팡 상품 데이터 구조
```typescript
interface CoupangProduct {
  productId: string;
  productName: string;
  productPrice: number;
  productImage: string;
  productUrl: string;
  rating: number;
  reviewCount: number;
}
```

### AI 글 작성 결과 구조
```typescript
interface BlogPost {
  title: string;
  content: string; // HTML
  focusKeyword: string;
  metaDescription: string;
  products: CoupangProduct[];
}
```

### 워드프레스 업로드 데이터
```typescript
interface WordPressPost {
  title: string;
  content: string;
  status: 'future'; // 예약 발행
  date: string; // ISO 8601 format
  meta: {
    rank_math_focus_keyword: string;
    rank_math_description: string;
  };
}
```

---

## 🔄 워크플로우 (사용자 시나리오)

### 시나리오 1: 단일 키워드로 글 작성
1. 사용자가 메인 페이지에서 키워드 "무선 이어폰" 입력
2. AI 모델 "Claude" 선택
3. 발행 간격 "10분", 시간대 "09:00 ~ 18:00" 설정
4. "실행하기" 버튼 클릭
5. 시스템 동작:
   - "쿠팡 상품 수집 중..." → 5개 상품 수집 완료
   - "AI 글 작성 중..." → Claude API 호출하여 글 작성 완료
   - "워드프레스 업로드 중..." → 다음 가능 시간(예: 09:10)에 예약 발행
   - "완료! ✅"

### 시나리오 2: 여러 키워드 리스트 일괄 실행
1. 사용자가 키워드 10개 입력:
   ```
   무선 이어폰
   블루투스 스피커
   게이밍 마우스
   ...
   ```
2. AI 모델 "Gemini" 선택
3. 발행 간격 "30분", 시간대 "10:00 ~ 17:00" 설정
4. "실행하기" 버튼 클릭
5. 시스템 동작:
   - 각 키워드별로 순차 실행
   - 첫 번째 글: 10:00 예약
   - 두 번째 글: 10:30 예약
   - 세 번째 글: 11:00 예약
   - ...
   - 8번째 글: 13:30 예약
   - 9번째 글: 14:00 예약
   - 10번째 글: 14:30 예약
   - "모든 작업 완료! ✅"

### 시나리오 3: 에러 발생 케이스
1. 사용자가 키워드 입력 후 실행
2. 쿠팡 API 호출 중 네트워크 에러 발생
3. 시스템 동작:
   - 즉시 프로세스 중단
   - 에러 메시지 표시: "쿠팡 API 호출 실패: Network Error. API 키를 확인하거나 잠시 후 다시 시도해주세요."
   - 사용자가 "확인" 클릭 후 재시도 가능

---

## 🚀 개발 단계

### Phase 1: 기획 & 디자인 (완료)
- [x] PRD 작성 완료
- [x] 기술 스택 확정

### Phase 2: 개발 환경 세팅
- [ ] Next.js 14 프로젝트 초기화
- [ ] TypeScript 설정
- [ ] Tailwind CSS 설정
- [ ] Git 저장소 생성

### Phase 3: API 연동 개발
- [ ] 쿠팡 파트너스 API 클라이언트 구현
- [ ] Claude API 클라이언트 구현
- [ ] Gemini API 클라이언트 구현
- [ ] 워드프레스 REST API 클라이언트 구현

### Phase 4: 핵심 기능 개발
- [ ] API 키 설정 페이지 구현
- [ ] 키워드 입력 UI 구현
- [ ] 상품 수집 로직 구현
- [ ] AI 글 작성 로직 구현
- [ ] 워드프레스 업로드 로직 구현
- [ ] 발행 예약 로직 구현

### Phase 5: UI/UX 구현
- [ ] 메인 페이지 디자인
- [ ] 설정 페이지 디자인
- [ ] 진행 상황 표시 컴포넌트
- [ ] 에러 알림 모달/토스트

### Phase 6: 테스트 & 디버깅
- [ ] 각 API 연동 테스트
- [ ] 전체 워크플로우 테스트
- [ ] 에러 케이스 테스트
- [ ] 발행 예약 시간 계산 검증

### Phase 7: 배포 & 런칭
- [ ] 환경 변수 설정
- [ ] Vercel 배포
- [ ] 실제 워드프레스 연동 테스트
- [ ] 운영 환경 모니터링 설정

---

## 📋 체크리스트

### 개발 전
- [x] PRD 검토 완료
- [x] 기술 스택 확정
- [ ] 쿠팡 파트너스 API 키 발급
- [ ] Claude API 키 발급
- [ ] Gemini API 키 발급
- [ ] 워드프레스 REST API 설정 완료
- [ ] Rank Math 플러그인 설치 확인

### 개발 중
- [ ] 코드 리뷰
- [ ] 타입 안정성 검증 (TypeScript)
- [ ] API 호출 에러 처리 완료
- [ ] 로컬 테스트 완료

### 배포 전
- [ ] 전체 워크플로우 테스트 완료
- [ ] 에러 핸들링 검증
- [ ] API 키 보안 확인
- [ ] 프로덕션 환경 변수 설정
- [ ] 성능 최적화 완료

---

## 🔐 보안 고려사항

### API 키 보안
- 브라우저 로컬 스토리지에 저장 (암호화 권장)
- 환경 변수로 관리 (서버 사이드)
- `.env.local` 파일 git 제외 (`.gitignore`)

### 워드프레스 인증
- Application Passwords 사용 권장
- HTTPS 필수

### 쿠팡 파트너스 API
- API 키 노출 방지
- 서버 사이드에서 호출 (클라이언트 노출 금지)

---

## 📈 성능 최적화

### API 호출 최적화
- 쿠팡 API Rate Limit 준수
- AI API 호출 시간 고려 (병렬 처리 불가 시)
- 워드프레스 업로드 배치 처리

### 프론트엔드 최적화
- 이미지 Lazy Loading (쿠팡 상품 이미지)
- 진행 상황 실시간 업데이트 (WebSocket 또는 Polling)

---

## 📞 참고 링크

### API 문서
- 쿠팡 파트너스 API: https://developers.coupangcorps.com/
- Claude API: https://docs.anthropic.com/
- Gemini API: https://ai.google.dev/
- 워드프레스 REST API: https://developer.wordpress.org/rest-api/
- Rank Math API: https://rankmath.com/kb/rest-api/

### 참고 사이트
- https://www.postincome.co.kr/archives/265296/
- https://www.postincome.co.kr/archives/265524/
- https://www.postincome.co.kr/archives/265507/

---

## 🎯 성공 지표 (KPI)

### Phase 1 목표
- 하루 10-30개 글 자동 작성 및 업로드 성공
- API 호출 성공률 95% 이상
- 에러 발생 시 명확한 알림 제공
- 작업 시간 90% 이상 절감

---

**문서 버전**: 1.0  
**최종 수정일**: 2026-01-19